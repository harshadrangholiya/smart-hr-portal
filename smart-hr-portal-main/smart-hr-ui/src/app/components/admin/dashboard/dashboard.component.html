<div class="container mt-4">
  <div class="alert alert-dark" role="alert">
    <h2>Admin Dashboard</h2>
  </div>

  <!-- ========== Department Form ========== -->
<div class="card mt-4">
  <div class="card-header bg-info text-white">
    <h4 class="mb-0">Manage Departments</h4>
  </div>
  <div class="card-body">
    <form [formGroup]="departmentForm" (ngSubmit)="saveDepartment()">
      <div class="form-group mb-3">
        <label>Name</label>
        <input type="text" class="form-control" formControlName="name" />
      </div>
      <div class="form-group mb-3">
        <label>Description</label>
        <input type="text" class="form-control" formControlName="description" />
      </div>
      <div class="form-group mb-3" *ngIf="isEditingDepartment">
        <label>Manager</label>
        <select class="form-control" formControlName="managerId">
          <option *ngFor="let dept of managers" [value]="dept.id">{{ dept.name }}</option>
        </select>
      </div>
      <button type="submit" class="btn btn-success">
        {{ isEditingDepartment ? 'Update' : 'Add' }} Department
      </button> &nbsp;
      <button
        type="button"
        class="btn btn-secondary ms-2"
        (click)="resetDepartmentForm()"
        *ngIf="isEditingDepartment"
      >
        Cancel
      </button>
    </form>
  </div>
</div>

  <!-- ========== Department Table ========== -->
  <table class="table table-bordered mt-4">
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let dept of departments">
        <td>{{ dept.name }}</td>
        <td>{{ dept.description }}</td>
        <td>
          <button class="btn btn-warning btn-sm" (click)="editDepartment(dept)">Edit</button> &nbsp;
          <button class="btn btn-danger btn-sm ms-2" (click)="deleteDepartment(dept.id)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>

 <!-- ========== Employee Form ========== -->
<div class="card mt-5">
  <div class="card-header bg-info text-white">
    <h4 class="mb-0">Manage Employees</h4>
  </div>
  <div class="card-body">
    <form [formGroup]="employeeForm" (ngSubmit)="saveEmployee()">
      <div class="form-group mb-3">
        <label>Name</label>
        <input class="form-control" formControlName="name" />
      </div>
      <div class="form-group mb-3">
        <label>Email</label>
        <input class="form-control" formControlName="email" />
      </div>
      <div class="form-group mb-3">
        <label>Department</label>
        <select class="form-control" formControlName="department">
          <option *ngFor="let dept of departments" [value]="dept.id">{{ dept.name }}</option>
        </select>
      </div>
      <button type="submit" class="btn btn-success mt-2">
        {{ isEditingEmployee ? 'Update' : 'Add' }} Employee
      </button> &nbsp;
      <button
        type="button"
        class="btn btn-secondary mt-2 ms-2"
        (click)="resetEmployeeForm()"
        *ngIf="isEditingEmployee"
      >
        Cancel
      </button>
    </form>
  </div>
</div>
  <!-- ========== Employee Table ========== -->
  <table class="table table-bordered mt-4">
    <thead>
      <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Department</th>
        <th>Manager</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let emp of employees">
        <td>{{ emp.name }}</td>
        <td>{{ emp.email }}</td>
        <td>{{ emp.department?.name }}</td>
        <td>{{ emp.department?.managerId || '-' }}</td>
        <td>
          <button class="btn btn-warning btn-sm" (click)="editEmployee(emp)">Edit</button>&nbsp;
          <button class="btn btn-danger btn-sm ms-2" (click)="deleteEmployee(emp.id)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
